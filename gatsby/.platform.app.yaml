# The name of this application, which must be unique within a project.
name: 'gatsby'

# The type key specifies the language and version for your application.
type: 'nodejs:12'

# The hooks that will be triggered when the package is deployed.
hooks:
    build: |
        chmod +x start.sh
        chmod +x post_deploy.sh
    post_deploy: |
        ./post_deploy.sh

relationships:
  drupal: "drupal:http"

# The size of the persistent disk of the application (in MB).
disk: 768

# The configuration of the application when it is exposed to the web.
web:
    commands:
        start: ./start.sh
    locations:
        '/':
            # The public directory of the application relative to its root.
            root: 'public'
            index: ['index.html']
            scripts: false
            allow: true
mounts:
    '/.cache':
        source: local
        source_path: cache
    'public':
        source: local
        source_path: public
